<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <title>电影信息</title>
    <meta content="" name="keywords"/>
    <meta content="" name="description"/>
    <meta content="webkit" name="renderer">
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link href="../../layui/css/layui.css" rel="stylesheet">
    <link href="../../xznstatic/css/common.css" rel="stylesheet"/>
    <link href="../../xznstatic/css/style.css" rel="stylesheet"/>
    <script src="../../xznstatic/js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script src="../../xznstatic/js/jquery.SuperSlide.2.1.1.js" type="text/javascript"></script>
</head>
<style>
    html::after {
		display:none;
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        content: '';
        /*display: block;*/
        background-attachment: fixed;
        background-size: cover;
        background-position: center;
    }

    #test1 {
        overflow: hidden;
    }

    #test1 .layui-carousel-ind li {
        width: 20px;
        height: 20px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        background-color: rgba(255, 255, 255, 1);
    }

    #test1 .layui-carousel-ind li.layui-this {
        width: 20px;
        height: 20px;
        border-width: 0;
        border-style: solid;
        border-color: rgba(0, 0, 0, .3);
        border-radius: 10px;
        background-color: rgba(88, 198, 231, 0.6);
    }

    .recommend {
        padding: 10px 0;
        display: flex;
        justify-content: center;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: cover;
    }

    .recommend .box {
        width: 1002px;
        margin: 0 auto;
    }

    .recommend .box .title {
        padding: 10px 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-sizing: border-box;
    }

    .recommend .box .title span {
        padding: 0 10px;
        font-size: 16px;
        line-height: 1.4;
    }

    .recommend .box .filter {
        padding: 0 10px;
        display: flex;
        align-items: center;
        box-sizing: border-box;
        width: 100%;
        flex-wrap: wrap;
    }

    .recommend .box .filter .item-list {
        display: flex;
        align-items: center;
    }

    .recommend .box .filter .item-list .lable {
        font-size: 14px;
        color: #333;
        box-sizing: border-box;
    }

    .recommend .box .filter .item-list input {
        padding: 0 10px;
        box-sizing: border-box;
        outline: none;
    }

    .recommend .box .filter button {
        display: flex;
        padding: 0 10px;
        box-sizing: border-box;
        align-items: center;
        justify-content: center;
        outline: none;
    }

    .recommend .box .filter button i {
        margin-right: 4px;
    }

    .recommend .box .list {
        display: flex;
        flex-wrap: wrap;
    }

    .recommend .box .list .list-item {
        flex: 0 0 33%;
        padding: 0 5px;
        box-sizing: border-box;
    }

    .recommend .box .list .list-item .list-item-body {
        cursor: pointer;
        border: 1px solid rgba(0, 0, 0, 3);
        padding: 5px;
        box-sizing: border-box;
    }

    .recommend .box .list .list-item-body img {
        width: 100%;
        height: 100px;
        display: block;
        margin: 0 auto;
    }

    .recommend .box .list .list-item-body .info {
        display: flex;
        flex-wrap: wrap;
    }

    .recommend .box .list .list-item-body .info .price {
        padding-top: 5px;
        color: rgba(172, 217, 230, 0.6);
        font-size: 14px;
        text-align: center;
        box-sizing: border-box;
    }

    .recommend .box .list .list-item-body .info .name {
        padding-top: 5px;
        color: rgba(186, 231, 244, 0.5);
        font-size: 14px;
        text-align: center;
        box-sizing: border-box;
    }

    .recommend .box .list .list-item3 {
        flex: 0 0 33.33%;
    }

    .recommend .box .list .list-item5 {
        flex: 0 0 20%;
    }

    .recommend .box .news {
        display: flex;
        flex-wrap: wrap;
        padding: 0;
        width: 100%;
    }

    .recommend .box .news .list-item {
        flex: 0 0 100%;
        padding: 0 10px;
        box-sizing: border-box;
    }

    .recommend .box .news .list-item .list-item-body {
        cursor: pointer;
        border: 1px solid rgba(0, 0, 0, 3);
        padding: 10px;
        box-sizing: border-box;
        display: flex;
    }

    .recommend .box .news .list-item .list-item-body img {
        width: 120px;
        height: 100%;
        display: block;
        margin: 0 auto;
    }

    .recommend .box .news .list-item .list-item-body .item-info {
        flex: 1;
        display: flex;
        justify-content: space-between;
        flex-direction: column;
        padding-left: 10px;
        box-sizing: border-box;
    }

    .recommend .box .news .list-item .list-item-body .item-info .name {
        padding-top: 5px;
        color: rgba(88, 198, 231, 0.6);
        font-size: 14px;
        box-sizing: border-box;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
    }

    .recommend .box .news .list-item .list-item-body .item-info .time {
        padding-top: 5px;
        color: rgba(88, 198, 231, 0.6);
        font-size: 14px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 1;
        -webkit-box-orient: vertical;
        box-sizing: border-box;
    }

    .recommend .box .news .list-item1 {
        flex: 0 0 100%;
    }

    .recommend .box .news .list-item3 {
        flex: 0 0 33.33%;
    }

    .index-pv1 .animation-box:hover {
        transform: perspective(1000px) translate3d(2px, 2px, 0px) scale(1) rotate(0deg) skew(0deg, 0deg);
        transition: all 0.1s;
    }

    .layui-laypage .layui-laypage-count {
        padding: 0 10px;
    }

    .layui-laypage .layui-laypage-skip {
        padding-left: 10px;
    }
</style>
<body>
<div id="app">

    <div :style='{"padding":"10px 0 10px 0","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 0 0 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(255, 255, 255, 1)","borderRadius":"0","borderWidth":"0","borderStyle":"solid"}'
         class="recommend index-pv1">
        <div class="box" style='width:90%'>
<!--            <div :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(0,0,0,0)","borderRadius":"0","borderWidth":"0","width":"100%","borderStyle":"solid","height":"auto"}'>-->
<!--                <div :index="-1" :style='swiperIndex==-1?{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(255, 153, 0, 1)","color":"#fff","borderRadius":"4px","borderWidth":"0","width":"84px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}:{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"#fff","color":"#333","borderRadius":"4px","borderWidth":"0","width":"84px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}'-->
<!--                     class="category-search"-->
<!--                     style="display: inline-block;text-align: center;cursor: pointer;">-->
<!--                    全部-->
<!--                </div>-->
<!--                <div :index="index" :key="index"-->
<!--                     :style='swiperIndex==index?{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(255, 153, 0, 1)","color":"#fff","borderRadius":"4px","borderWidth":"0","width":"84px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}:{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"0 10px 0 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"#fff","color":"#333","borderRadius":"4px","borderWidth":"0","width":"84px","lineHeight":"34px","fontSize":"14px","borderStyle":"solid"}'-->
<!--                     class="category-search" style="display: inline-block;text-align: center;cursor: pointer;"-->
<!--                     v-for="(item,index) in categoryList">-->
<!--                    {{categoryList[index]}}-->
<!--                </div>-->
<!--            </div>-->
            <div :style='{
            "padding": "0 ",
            "margin": "0",
            "display": "grid",
            "gridTemplateColumns": "repeat(6, 1fr)",
            "gap": "15px 10px",
            "width": "100%",
            "boxSizing": "border-box"
}'>
                <div :index="-1"
                     :style='{
                     "padding": "0 10px",
                     "boxShadow": "0 0 6px rgba(0,0,0,.3)",
                     "textAlign": "center",
                     "lineHeight": "34px",
                     "fontSize": "14px",
                     "borderRadius": "4px",
                     "backgroundColor": swiperIndex==-1 ? "rgb(151,222,208)" : "#fff",
                     "color": swiperIndex==-1 ? "#fff" : "#333",
                     "cursor": "pointer"
         }'
                     class="category-search">
                    全部
                </div>
                <div v-for="(item,index) in categoryList"
                     :key="index"
                     :index="index"
                     :style='{
                         "padding": "0 10px",
                         "boxShadow": "0 0 6px rgba(0,0,0,.3)",
                         "textAlign": "center",
                         "lineHeight": "34px",
                         "fontSize": "14px",
                         "borderRadius": "4px",
                         "backgroundColor": swiperIndex==index ? "rgb(151,222,208)" : "#fff",
                         "color": swiperIndex==index ? "#fff" : "#333",
                         "cursor": "pointer"
         }'
                     class="category-search">
                    {{item}}
                </div>
            </div>

            <div :style='{"margin":"20px","padding":"10px 0 10px 0","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 0 10px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgb(151,222,208)","borderRadius":"4px","borderWidth":"0","borderStyle":"solid","justifyContent":"flex-start","height":"54px"}'
                 class="title">
                <span :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(255,0,0,1)","backgroundColor":"rgba(0,0,0,0)","color":"#333","borderRadius":"0 0 2px 0","borderWidth":"0","fontSize":"18px","borderStyle":"solid"}'>电影信息</span><span
                    :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(0,0,0,0)","backgroundColor":"rgba(0,0,0,0)","color":"rgba(0, 0, 0, 1)","borderRadius":"0","borderWidth":"0","fontSize":"14px","borderStyle":"solid"}'>您现在的位置：电影信息</span>
            </div>
            <form :style='{
    "padding": "10px 0",
    "display": "flex",
    "gap": "15px",
    "alignItems": "center",
    "justifyContent": "flex-end"
}' class="layui-form filter">
                <div class="item-list" style="flex:1">
                    <input :style='{
            "width": "100%",
            "height": "44px",
            "padding": "0 10px",
            "backgroundColor": "rgb(228,246,243)",
            "borderRadius": "8px",
            "fontSize": "14px"
        }' class="layui-input"
                           placeholder="电影名称"
                           style="border:none; box-shadow:none; color:#666"
                           id="dianyingmingcheng"
                           name="dianyingmingcheng"
                           type="text">
                </div>
                <div class="item-list" style="flex:1">
                    <input :style='{
            "width": "100%",
            "height": "44px",
            "padding": "0 10px",
            "backgroundColor": "rgb(228,246,243)",
            "borderRadius": "8px",
            "fontSize": "14px"
        }' class="layui-input"
                           placeholder="导演"
                           style="border:none; box-shadow:none; color:#666"
                           id="daoyan"
                           name="daoyan"
                           type="text">
                </div>
                <div class="item-list" style="flex:1">
                    <input :style='{
            "width": "100%",
            "height": "44px",
            "padding": "0 10px",
            "backgroundColor": "rgb(228,246,243)",
            "borderRadius": "8px",
            "fontSize": "14px"
        }' class="layui-input"
                           placeholder="主演"
                           style="border:none; box-shadow:none; color:#666"
                           id="zhuyan"
                           name="zhuyan"
                           type="text">
                </div>
                <button :style='{
        "width": "100px",
        "height": "44px",
        "backgroundColor": "rgb(151,222,208)",
        "border": "none",
        "color": "#fff",
        "fontSize": "14px"
    }' class="layui-btn"
                        id="btn-search"
                        type="button">
                    <i class="layui-icon layui-icon-search"></i>搜索
                </button>
            </form>

            <!-- 电影信息 -->
            <!-- 修改后的电影信息展示区域 -->
            <div class="recommend index-pv1">
                <div class="list" :style='{"padding":"0 5px"}'>
                    <div :class="4=='3'?'list-item3':4=='5'?'list-item5':''"
                         :style='{"margin":"0 5px", "flex":"0 0 calc(25% - 10px)"}'
                         :key="index"
                         @click="jump('../dianyingxinxi/detail.html?id='+item.id)"
                         class="list-item"
                         v-for="(item,index) in dataList">

                        <!-- 新的卡片样式 -->
                        <div :style='{
                "padding":"6px",
                "boxShadow":"0 0 0px rgba(255,0,0,.8)",
                "margin":"0 0 15px 0",
                "borderColor":"rgba(0,0,0,.3)",
                "backgroundColor":"rgba(255, 255, 255, 1)",
                "borderRadius":"0px",
                "borderWidth":"0",
                "borderStyle":"solid"}'
                             class="list-item-body animation-box">

                            <!-- 海报部分 -->
                            <img :src="item.haibao?item.haibao.split(',')[0]:''"
                                 :style='{
                        "boxShadow":"0 0 0px rgba(255,0,0,.8)",
                        "borderColor":"rgba(0,0,0,.3)",
                        "borderRadius":"0",
                        "borderWidth":"0",
                        "width":"100%",
                        "borderStyle":"solid",
                        "height":"300px"}'>

                            <!-- 信息部分 -->
                            <div :style='{
                    "isshow":true,
                    "padding":" 0",
                    "margin":"8px 0 0 0",
                    "backgroundColor":"rgb(189,234,226)",
                    "color":"#2c3e50",
                    "borderRadius":"6px",
                    "textAlign":"center",
                    "fontSize":"16px",
                    "minHeight":"50px",
                    "display":"flex",
                    "alignItems":"center",
                    "justifyContent":"center"}'
                                 class="name">
                                {{item.dianyingmingcheng}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 分页按钮样式修改 -->
            <div style="text-align: center;">
                <el-button :style='{
        "padding":"5px 15px",
        "boxShadow":"0 0 6px rgba(255,0,0,0)",
        "margin":"4px auto",
        "borderColor":"#ccc",
        "backgroundColor":"#fff",
        "color":"rgb(151,222,208)",
        "borderRadius":"6px",
        "borderWidth":"0",
        "width":"auto",
        "fontSize":"16px",
        "borderStyle":"solid",
        "height":"34px"}'
                           @click="jump('../dianyingxinxi/list.html')"
                           type="button">
                    更多电影
                </el-button>
            </div>

        </div>


</div>

<script src="../../layui/layui.js"></script>
<script src="../../js/vue.js"></script>
<script src="../../js/config.js"></script>
<script src="../../modules/config.js"></script>
<script src="../../js/utils.js"></script>

<script type="text/javascript">
    var vue = new Vue({
        el: '#app',
        data: {
            swiperList: [],
            categoryList: [],
            dataList: [],
            swiperIndex: '-1'
        },
        filters: {
            newsDesc: function (val) {
                if (val) {
                    if (val.length > 60) {
                        return val.substring(0, 60).replace(/<[^>]*>/g).replace(/undefined/g, '');
                    } else {
                        return val.replace(/<[^>]*>/g).replace(/undefined/g, '');
                    }
                }
                return '';
            }
        },
        methods: {
            isAuth(tablename, button) {
                return isFrontAuth(tablename, button)
            },
            jump(url) {
                jump(url)
            }
        }
    });

    layui.use(['layer', 'element', 'carousel', 'laypage', 'http', 'jquery', 'laydate'], function () {
        var layer = layui.layer;
        var element = layui.element;
        var carousel = layui.carousel;
        var laypage = layui.laypage;
        var http = layui.http;
        var jquery = layui.jquery;
        var laydate = layui.laydate;

        var limit = 8;

        // 获取轮播图 数据
        // http.request('config/list', 'get', {
        //     page: 1,
        //     limit: 5
        // }, function (res) {
        //     if (res.data.list.length > 0) {
        //         let swiperList = [];
        //         res.data.list.forEach(element => {
        //             if (element.value != null) {
        //                 swiperList.push({
        //                     img: element.value
        //                 });
        //             }
        //         });
        //         vue.swiperList = swiperList;
        //
        //         vue.$nextTick(() => {
        //             carousel.render({
        //                 elem: '#test1',
        //                 width: '90%',
        //                 height: '500px',
        //                 arrow: 'hover',
        //                 anim: 'default',
        //                 autoplay: 'true',
        //                 interval: '3000',
        //                 indicator: 'inside'
        //             });
        //
        //         })
        //         // vue.$nextTick(()=>{
        //         //   window.xznSlide();
        //         // });
        //     }
        // });


        //类型查询
        categoryList();
        //类型搜索
        $(document).on("click", ".category-search", function (e) {
            vue.swiperIndex = $(this).attr('index')
            pageList(e.target.innerText);
        });

        function categoryList() {
            // 获取列表数据
            http.request('option/dianyingleixing/dianyingleixing', 'get', {}, function (res) {
                vue.categoryList = res.data
            })

        }

        var vCategory = '';

        // 分页列表
        pageList();

        // 搜索按钮
        jquery('#btn-search').click(function (e) {
            pageList();
        });

        function pageList(category) {
            var param = {
                page: 1,
                limit: limit
            }
            if (category != null && category != '全部') {
                vCategory = category;
                if (jquery('#dianyingmingcheng').val()) {
                    param['dianyingmingcheng'] = '';
                }
                if (jquery('#daoyan').val()) {
                    param['daoyan'] = '';
                }
                if (jquery('#zhuyan').val()) {
                    param['zhuyan'] = '';
                }
            }
            if (vCategory != '' && category != '全部') {
                param['dianyingleixing'] = category;
            }


            if (jquery('#dianyingmingcheng').val()) {
                param['dianyingmingcheng'] = jquery('#dianyingmingcheng').val() ? '%' + jquery('#dianyingmingcheng').val() + '%' : '';
            }
            if (jquery('#daoyan').val()) {
                param['daoyan'] = jquery('#daoyan').val() ? '%' + jquery('#daoyan').val() + '%' : '';
            }
            if (jquery('#zhuyan').val()) {
                param['zhuyan'] = jquery('#zhuyan').val() ? '%' + jquery('#zhuyan').val() + '%' : '';
            }


            // 获取列表数据
            http.request('dianyingxinxi/list', 'get', param, function (res) {
                vue.dataList = res.data.list
                // 分页
                laypage.render({
                    elem: 'pager',
                    count: res.data.total,
                    limit: limit,
                    groups: 5,
                    layout: ["prev", "page", "next"],
                    theme: '#FF9900',
                    jump: function (obj, first) {
                        param.page = obj.curr;
                        //首次不执行
                        if (!first) {
                            http.request('dianyingxinxi/list', 'get', param, function (res) {
                                vue.dataList = res.data.list
                            })
                        }
                    }
                });
            })
        }
    });

    window.xznSlide = function () {
        // jQuery(".banner").slide({mainCell: ".bd ul", autoPlay: true, interTime: 5000});
        jQuery("#ifocus").slide({
            titCell: "#ifocus_btn li",
            mainCell: "#ifocus_piclist ul",
            effect: "leftLoop",
            delayTime: 200,
            autoPlay: true,
            triggerTime: 0
        });
        jQuery("#ifocus").slide({titCell: "#ifocus_btn li", mainCell: "#ifocus_tx ul", delayTime: 0, autoPlay: true});
        jQuery(".product_list").slide({
            mainCell: ".bd ul",
            autoPage: true,
            effect: "leftLoop",
            autoPlay: true,
            vis: 5,
            trigger: "click",
            interTime: 4000
        });
    };
</script>
</body>
</html>
